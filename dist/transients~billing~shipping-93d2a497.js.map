{"version":3,"sources":["webpack://checkout/../src/script-loader.ts","webpack://checkout/../src/create-script-loader.ts","webpack://checkout/../src/browser-support.ts","webpack://checkout/../src/stylesheet-loader.ts","webpack://checkout/../src/create-stylesheet-loader.ts","webpack://checkout/../src/index.ts","webpack://checkout/../src/get-script-loader.ts","webpack://checkout/../src/get-stylesheet-loader.ts"],"names":["_browserSupport","_requestSender","_scripts","_preloadedScripts","loadScript","src","options","this","Promise","resolve","reject","script","document","createElement","async","onload","onreadystatechange","onerror","event","body","appendChild","loadScripts","urls","all","map","url","then","preloadScript","prefetch","rel","canSupportRel","preloadedScript","as","href","head","get","credentials","headers","Accept","catch","preloadScripts","createRequestSender","link","relList","supports","_stylesheets","_preloadedStylesheets","loadStylesheet","stylesheet","prepend","children","insertBefore","loadStylesheets","preloadStylesheet","preloadedStylesheet","preloadStylesheets","default","instance"],"mappings":"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","file":"transients~billing~shipping-93d2a497.js","sourcesContent":["import { RequestSender } from '@bigcommerce/request-sender';\n\nimport BrowserSupport from './browser-support';\n\nexport interface LoadScriptOptions {\n    async: boolean;\n}\n\nexport interface PreloadScriptOptions {\n    prefetch: boolean;\n}\n\nexport default class ScriptLoader {\n    private _scripts: { [key: string]: Promise<void> } = {};\n    private _preloadedScripts: { [key: string]: Promise<void> } = {};\n\n    /**\n     * @internal\n     */\n    constructor(\n        private _browserSupport: BrowserSupport,\n        private _requestSender: RequestSender\n    ) {}\n\n    loadScript(src: string, options?: LoadScriptOptions): Promise<void> {\n        if (!this._scripts[src]) {\n            this._scripts[src] = new Promise((resolve, reject) => {\n                const script = document.createElement('script') as LegacyHTMLScriptElement;\n                const { async = false } = options || {};\n\n                script.onload = () => resolve();\n                script.onreadystatechange = () => resolve();\n                script.onerror = event => {\n                    delete this._scripts[src];\n                    reject(event);\n                };\n                script.async = async;\n                script.src = src;\n\n                document.body.appendChild(script);\n            });\n        }\n\n        return this._scripts[src];\n    }\n\n    loadScripts(urls: string[], options?: LoadScriptOptions): Promise<void> {\n        return Promise.all(urls.map(url => this.loadScript(url, options)))\n            .then(() => undefined);\n    }\n\n    preloadScript(url: string, options?: PreloadScriptOptions): Promise<void> {\n        if (!this._preloadedScripts[url]) {\n            this._preloadedScripts[url] = new Promise((resolve, reject) => {\n                const { prefetch = false } = options || {};\n                const rel = prefetch ? 'prefetch' : 'preload';\n\n                if (this._browserSupport.canSupportRel(rel)) {\n                    const preloadedScript = document.createElement('link');\n\n                    preloadedScript.as = 'script';\n                    preloadedScript.rel = rel;\n                    preloadedScript.href = url;\n\n                    preloadedScript.onload = () => {\n                        resolve();\n                    };\n\n                    preloadedScript.onerror = () => {\n                        delete this._preloadedScripts[url];\n                        reject();\n                    };\n\n                    document.head.appendChild(preloadedScript);\n                } else {\n                    this._requestSender.get(url, {\n                        credentials: false,\n                        headers: { Accept: 'application/javascript' },\n                    })\n                        .then(() => resolve())\n                        .catch(reject);\n                }\n            });\n        }\n\n        return this._preloadedScripts[url];\n    }\n\n    preloadScripts(urls: string[], options?: PreloadScriptOptions): Promise<void> {\n        return Promise.all(urls.map(url => this.preloadScript(url, options)))\n            .then(() => undefined);\n    }\n}\n\ninterface LegacyHTMLScriptElement extends HTMLScriptElement {\n    // `onreadystatechange` is needed to support legacy IE\n    onreadystatechange(this: HTMLElement, event: Event): any;\n}\n","import { createRequestSender } from '@bigcommerce/request-sender';\n\nimport BrowserSupport from './browser-support';\nimport ScriptLoader from './script-loader';\n\nexport default function createScriptLoader(): ScriptLoader {\n    return new ScriptLoader(\n        new BrowserSupport(),\n        createRequestSender()\n    );\n}\n","export default class BrowserSupport {\n    canSupportRel(rel: string): boolean {\n        const link = document.createElement('link');\n\n        return !!(\n            link.relList &&\n            link.relList.supports &&\n            link.relList.supports(rel)\n        );\n    }\n}\n","import { RequestSender } from '@bigcommerce/request-sender';\n\nimport BrowserSupport from './browser-support';\n\nexport interface LoadStylesheetOptions {\n    prepend: boolean;\n}\n\nexport interface PreloadStylesheetOptions {\n    prefetch: boolean;\n}\n\nexport default class StylesheetLoader {\n    private _stylesheets: { [key: string]: Promise<void> } = {};\n    private _preloadedStylesheets: { [key: string]: Promise<void> } = {};\n\n    /**\n     * @internal\n     */\n    constructor(\n        private _browserSupport: BrowserSupport,\n        private _requestSender: RequestSender\n    ) {}\n\n    loadStylesheet(src: string, options?: LoadStylesheetOptions): Promise<void> {\n        if (!this._stylesheets[src]) {\n            this._stylesheets[src] = new Promise((resolve, reject) => {\n                const stylesheet = document.createElement('link');\n                const { prepend = false } = options || {};\n\n                stylesheet.onload = () => resolve();\n                stylesheet.onerror = event => {\n                    delete this._stylesheets[src];\n                    reject(event);\n                };\n                stylesheet.rel = 'stylesheet';\n                stylesheet.href = src;\n\n                if (prepend && document.head.children[0]) {\n                    document.head.insertBefore(stylesheet, document.head.children[0]);\n                } else {\n                    document.head.appendChild(stylesheet);\n                }\n            });\n        }\n\n        return this._stylesheets[src];\n    }\n\n    loadStylesheets(urls: string[], options?: LoadStylesheetOptions): Promise<void> {\n        return Promise.all(urls.map(url => this.loadStylesheet(url, options)))\n            .then(() => undefined);\n    }\n\n    preloadStylesheet(url: string, options?: PreloadStylesheetOptions): Promise<void> {\n        if (!this._preloadedStylesheets[url]) {\n            this._preloadedStylesheets[url] = new Promise((resolve, reject) => {\n                const { prefetch = false } = options || {};\n                const rel = prefetch ? 'prefetch' : 'preload';\n\n                if (this._browserSupport.canSupportRel(rel)) {\n                    const preloadedStylesheet = document.createElement('link');\n\n                    preloadedStylesheet.as = 'style';\n                    preloadedStylesheet.rel = prefetch ? 'prefetch' : 'preload';\n                    preloadedStylesheet.href = url;\n\n                    preloadedStylesheet.onload = () => {\n                        resolve();\n                    };\n\n                    preloadedStylesheet.onerror = event => {\n                        delete this._preloadedStylesheets[url];\n                        reject(event);\n                    };\n\n                    document.head.appendChild(preloadedStylesheet);\n                } else {\n                    this._requestSender.get(url, {\n                        credentials: false,\n                        headers: { Accept: 'text/css' },\n                    })\n                        .then(() => resolve())\n                        .catch(reject);\n                }\n            });\n        }\n\n        return this._preloadedStylesheets[url];\n    }\n\n    preloadStylesheets(urls: string[], options?: PreloadStylesheetOptions): Promise<void> {\n        return Promise.all(urls.map(url => this.preloadStylesheet(url, options)))\n            .then(() => undefined);\n    }\n}\n","import { createRequestSender } from '@bigcommerce/request-sender';\n\nimport BrowserSupport from './browser-support';\nimport StylesheetLoader from './stylesheet-loader';\n\nexport default function createStylesheetLoader(): StylesheetLoader {\n    return new StylesheetLoader(\n        new BrowserSupport(),\n        createRequestSender()\n    );\n}\n","export { default as ScriptLoader, LoadScriptOptions, PreloadScriptOptions } from './script-loader';\nexport { default as createScriptLoader } from './create-script-loader';\nexport { default as getScriptLoader } from './get-script-loader';\n\nexport { default as StylesheetLoader, LoadStylesheetOptions, PreloadStylesheetOptions } from './stylesheet-loader';\nexport { default as createStylesheetLoader } from './create-stylesheet-loader';\nexport { default as getStylesheetLoader } from './get-stylesheet-loader';\n","import createScriptLoader from './create-script-loader';\nimport ScriptLoader from './script-loader';\n\nlet instance: ScriptLoader;\n\nexport default function getScriptLoader(): ScriptLoader {\n    if (!instance) {\n        instance = createScriptLoader();\n    }\n\n    return instance;\n}\n","import createStylesheetLoader from './create-stylesheet-loader';\nimport StylesheetLoader from './stylesheet-loader';\n\nlet instance: StylesheetLoader;\n\nexport default function getStylesheetLoader(): StylesheetLoader {\n    if (!instance) {\n        instance = createStylesheetLoader();\n    }\n\n    return instance;\n}\n"],"sourceRoot":""}